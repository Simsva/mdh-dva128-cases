#!/usr/bin/env python3

import os
import json

# Data from the problem
bookworms_raw = '[{"name":"Helena Nyberg","occupation":"police","books_read":["Harry Potter and the Chamber of Secrets","The Alchemist","Heidi"]},{"name":"Helen Ekström","occupation":"salesperson","books_read":["Harry Potter and the Philosophers Stone","Alices Adventures in Wonderland"]},{"name":"Berit Jansson","occupation":"paramedic","books_read":["Alices Adventures in Wonderland","Harry Potter and the Philosophers Stone","The Adventures of Pinocchio","The Lion, the Witch and the Wardrobe"]},{"name":"Arvid Lundberg","occupation":"janitor","books_read":["The Lord of the Rings","The Lion, the Witch and the Wardrobe","The Da Vinci Code","Alices Adventures in Wonderland","The Alchemist"]},{"name":"Yvonne Månsson","occupation":"lawyer","books_read":["The Hobbit","The Alchemist","Harry Potter and the Philosophers Stone","The Lord of the Rings","The Da Vinci Code","Alices Adventures in Wonderland"]},{"name":"Julia Forsberg","occupation":"programmer","books_read":["Heidi","Alices Adventures in Wonderland","The Lion, the Witch and the Wardrobe","The Adventures of Pinocchio"]},{"name":"Marcus Johansson","occupation":"bookkeeper","books_read":["The Da Vinci Code","The Hobbit","The Adventures of Pinocchio"]},{"name":"Louise Lindqvist","occupation":"bookkeeper","books_read":["Alices Adventures in Wonderland","Heidi","The Alchemist","The Lion, the Witch and the Wardrobe","Harry Potter and the Philosophers Stone","The Hobbit"]},{"name":"Matilda Magnusson","occupation":"firefighter","books_read":["Harry Potter and the Chamber of Secrets","The Lord of the Rings","Alices Adventures in Wonderland"]},{"name":"Alexander Mattsson","occupation":"paramedic","books_read":["The Da Vinci Code","Harry Potter and the Chamber of Secrets","The Adventures of Pinocchio","Alices Adventures in Wonderland","The Hobbit"]},{"name":"Jenny Jakobsson","occupation":"singer","books_read":["The Lord of the Rings","Harry Potter and the Chamber of Secrets"]},{"name":"Gunilla Nilsson","occupation":"paramedic","books_read":["The Da Vinci Code","The Lion, the Witch and the Wardrobe","Harry Potter and the Philosophers Stone","Alices Adventures in Wonderland"]},{"name":"Ove Lindberg","occupation":"criminal","books_read":["The Hobbit","The Da Vinci Code","Harry Potter and the Philosophers Stone","Heidi","Harry Potter and the Chamber of Secrets","The Lord of the Rings"]},{"name":"Adam Claesson","occupation":"nurse","books_read":["Heidi","The Lord of the Rings"]},{"name":"Björn Månsson","occupation":"programmer","books_read":["Heidi","The Alchemist","The Lord of the Rings","Harry Potter and the Chamber of Secrets"]},{"name":"Ingeborg Pettersson","occupation":"trucker","books_read":["The Lion, the Witch and the Wardrobe","The Hobbit"]},{"name":"William Larsson","occupation":"criminal","books_read":["The Adventures of Pinocchio","Alices Adventures in Wonderland","The Hobbit"]},{"name":"Roland Månsson","occupation":"trucker","books_read":["The Hobbit","The Da Vinci Code","Alices Adventures in Wonderland","Harry Potter and the Chamber of Secrets","The Lord of the Rings"]},{"name":"Fredrik Nordström","occupation":"lawyer","books_read":["The Lord of the Rings","Harry Potter and the Chamber of Secrets","The Adventures of Pinocchio"]},{"name":"Elsa Berg","occupation":"criminal","books_read":["Harry Potter and the Philosophers Stone","The Da Vinci Code","The Lord of the Rings","Alices Adventures in Wonderland","The Lion, the Witch and the Wardrobe","The Hobbit"]},{"name":"Jonas Andreasson","occupation":"singer","books_read":["Harry Potter and the Chamber of Secrets","The Lord of the Rings","Harry Potter and the Philosophers Stone","The Hobbit","The Lion, the Witch and the Wardrobe","The Alchemist"]},{"name":"Roland Lundqvist","occupation":"bookkeeper","books_read":["The Lion, the Witch and the Wardrobe","The Lord of the Rings","Alices Adventures in Wonderland"]},{"name":"Filip Olsson","occupation":"painter","books_read":["Heidi","The Da Vinci Code","The Lion, the Witch and the Wardrobe","Alices Adventures in Wonderland","The Lord of the Rings","The Alchemist"]},{"name":"Sofia Engström","occupation":"salesperson","books_read":["The Hobbit","Harry Potter and the Chamber of Secrets","Harry Potter and the Philosophers Stone"]},{"name":"Hanna Samuelsson","occupation":"police","books_read":["The Adventures of Pinocchio","Alices Adventures in Wonderland","The Alchemist"]},{"name":"Caroline Ali","occupation":"nurse","books_read":["The Da Vinci Code","Heidi","Harry Potter and the Chamber of Secrets"]},{"name":"Karolina Lindholm","occupation":"painter","books_read":["The Adventures of Pinocchio","The Da Vinci Code","Alices Adventures in Wonderland"]},{"name":"Patrik Norberg","occupation":"salesperson","books_read":["Alices Adventures in Wonderland","The Hobbit","The Lord of the Rings","The Adventures of Pinocchio","Harry Potter and the Chamber of Secrets","Heidi"]},{"name":"Björn Sundberg","occupation":"paramedic","books_read":["The Hobbit","Harry Potter and the Philosophers Stone","The Lord of the Rings","The Adventures of Pinocchio","The Lion, the Witch and the Wardrobe","Heidi"]},{"name":"Katarina Johansson","occupation":"firefighter","books_read":["The Alchemist","The Lion, the Witch and the Wardrobe","The Lord of the Rings","Harry Potter and the Chamber of Secrets","The Da Vinci Code","Harry Potter and the Philosophers Stone"]},{"name":"Lisa Nyström","occupation":"scientist","books_read":["Harry Potter and the Philosophers Stone","Harry Potter and the Chamber of Secrets"]},{"name":"Mona Arvidsson","occupation":"police","books_read":["Heidi","The Lord of the Rings","Harry Potter and the Philosophers Stone"]},{"name":"Ingemar Karlsson","occupation":"singer","books_read":["The Adventures of Pinocchio","Harry Potter and the Chamber of Secrets","The Alchemist","The Da Vinci Code"]},{"name":"Åke Hellström","occupation":"salesperson","books_read":["The Lord of the Rings","The Hobbit","Alices Adventures in Wonderland"]},{"name":"Margareta Lundqvist","occupation":"janitor","books_read":["Harry Potter and the Philosophers Stone","The Adventures of Pinocchio","Harry Potter and the Chamber of Secrets","The Alchemist","The Lion, the Witch and the Wardrobe"]},{"name":"Anders Hedlund","occupation":"programmer","books_read":["The Lord of the Rings","Alices Adventures in Wonderland","The Lion, the Witch and the Wardrobe","The Alchemist","Heidi"]},{"name":"Anton Bergqvist","occupation":"unemployed","books_read":["The Da Vinci Code","The Alchemist","The Hobbit","Harry Potter and the Chamber of Secrets","Heidi"]},{"name":"Ove Lind","occupation":"painter","books_read":["Harry Potter and the Philosophers Stone","The Lion, the Witch and the Wardrobe","The Da Vinci Code"]},{"name":"Arvid Bergqvist","occupation":"janitor","books_read":["Alices Adventures in Wonderland","Harry Potter and the Chamber of Secrets","The Adventures of Pinocchio","The Alchemist"]},{"name":"Ann-Christin Karlsson","occupation":"teacher","books_read":["The Alchemist","Harry Potter and the Philosophers Stone","Harry Potter and the Chamber of Secrets","The Hobbit"]},{"name":"Georg Nordin","occupation":"doctor","books_read":["The Alchemist","The Adventures of Pinocchio","Heidi","The Lion, the Witch and the Wardrobe"]},{"name":"Christoffer Arvidsson","occupation":"cashier","books_read":["The Da Vinci Code","The Alchemist"]},{"name":"Johnny Lind","occupation":"unemployed","books_read":["Heidi","The Lion, the Witch and the Wardrobe","The Lord of the Rings","The Adventures of Pinocchio","Harry Potter and the Chamber of Secrets"]},{"name":"Ebba Lundqvist","occupation":"lawyer","books_read":["The Lord of the Rings","Harry Potter and the Chamber of Secrets","The Lion, the Witch and the Wardrobe","The Hobbit","Alices Adventures in Wonderland","The Da Vinci Code"]},{"name":"Christoffer Ali","occupation":"janitor","books_read":["The Adventures of Pinocchio","Harry Potter and the Chamber of Secrets","The Lion, the Witch and the Wardrobe","The Da Vinci Code","Heidi","The Lord of the Rings"]},{"name":"Rickard Mohamed","occupation":"scientist","books_read":["The Hobbit","Alices Adventures in Wonderland","The Lord of the Rings","The Adventures of Pinocchio","Heidi","Harry Potter and the Chamber of Secrets"]},{"name":"Georg Svensson","occupation":"firefighter","books_read":["The Lord of the Rings","Heidi","The Alchemist","The Da Vinci Code","The Hobbit","The Lion, the Witch and the Wardrobe"]},{"name":"Hans Lundström","occupation":"salesperson","books_read":["The Lion, the Witch and the Wardrobe","The Lord of the Rings","The Da Vinci Code","Alices Adventures in Wonderland"]},{"name":"Johnny Sjöberg","occupation":"programmer","books_read":["Alices Adventures in Wonderland","The Da Vinci Code","Harry Potter and the Chamber of Secrets","Heidi"]},{"name":"Mattias Viklund","occupation":"nurse","books_read":["The Lord of the Rings","Harry Potter and the Chamber of Secrets","The Adventures of Pinocchio","Alices Adventures in Wonderland"]}]'
bookworms = json.loads(bookworms_raw)

def cls():
    os.system("cls" if os.name == "nt" else "clear")

def list_bookworms(search):
    return [ bookworm["name"] for bookworm in filter(lambda x: set(search).issubset(x["books_read"]), bookworms) ]

def main():
    while True:
        cls()
        print('.: BOOKWORM DATABASE :.')
        print(23 * '-')

        search = []

        while True:
            user_input = input('> ')
            if user_input == '':
                break
            search.append(user_input)

        print(23 * '-')

        for bookworm in list_bookworms(search):
            print(' * ' + bookworm)

        print(23 * '-')
        input('Press enter to search again...')

if __name__ == '__main__':
    main()
